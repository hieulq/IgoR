["/*c7e34ee062fafbcc57bb74a313a9bf306870f345*/Ext.define(\"Igor.model.Notification\",{extend:\"Ext.data.Model\",config:{fields:[\"notification_id\",\"userid\",\"username\",\"avatar\",\"action\",\"object\",\"objectid\",\"date\",\"is_read\"]}});Ext.define(\"Igor.model.User\",{extend:\"Ext.data.Model\",config:{idProperty:\"userid\",identifier:{type:\"uuid\"},fields:[{name:\"userid\",type:\"int\"},{name:\"fullname\",type:\"string\"},{name:\"avatar\",type:\"string\"},{name:\"studentid\",type:\"int\"},{name:\"email\",type:\"string\"},{name:\"group\",type:\"string\"},{name:\"course\",type:\"string\"},{name:\"loggedIn\",type:\"boolean\",defaultValue:false}]}});Ext.define(\"Igor.model.Task\",{extend:\"Ext.data.Model\",config:{fields:[\"class_code\",\"class_id\",\"subject_name\",\"num_of_day\",\"period\",\"subject_code\",\"session_start\",\"total_session\",\"teacher_name\",\"location\"]}});Ext.define(\"Igor.model.Classdetail\",{extend:\"Ext.data.Model\",config:{fields:[\"class_id\",\"class_code\",\"subject_name\",\"num_of_day\",\"period\",\"subject_code\",\"session_start\",\"total_session\",\"teacher_name\",\"location\"],}});Ext.define(\"Igor.model.Classproject\",{extend:\"Ext.data.Model\",config:{fields:[\"projectid\",\"name\",\"description\"],associations:[{type:\"hasMany\",model:\"Igor.model.Projectmember\",name:\"members\",associationKey:\"members\"},{type:\"hasMany\",model:\"Igor.model.Projectjob\",name:\"jobs\",associationKey:\"jobs\"},],proxy:{type:\"ajax\",url:\"data/job_project.json",739,36,"projects\"}}}});Ext.define(\"Igor.model.Classtask\",{extend:\"Ext.data.Model\",config:{fields:[\"jobid\",\"name\",\"status\",\"start_time\",\"end_time\",\"repeat_date\",\"location\",\"note\"],proxy:{type:\"ajax\",url:\"data/job_project.json",739,36,"tasks\"}}}});Ext.define(\"Igor.model.Projectjob\",{extend:\"Ext.data.Model\",config:{fields:[\"jobid\",\"name\",\"status\",\"start_time\",\"end_time\",\"repeat_date\",\"location\",\"note\"],proxy:{type:\"ajax\",url:\"data/job_project.json",739,36,"projects.jobs\"}}}});Ext.define(\"Igor.model.Projectmember\",{extend:\"Ext.data.Model\",config:{fields:[\"userid\",\"username\",\"fullname\",\"password\",\"avatar\",\"studentid\",\"email\",\"group\",\"course\"],proxy:{type:\"ajax\",url:\"data/job_project.json",739,36,"projects.members\"}}}});Ext.define(\"Igor.model.Classuser\",{extend:\"Ext.data.Model\",config:{fields:[\"userid\",\"username\",\"fullname\",\"password\",\"avatar\",\"studentid\",\"email\",\"group\",\"course\"]}});Ext.define(\"Igor.model.Profile\",{extend:\"Ext.data.Model\",config:{idProperty:\"userid\",identifier:{type:\"uuid\"},fields:[{name:\"userid\",type:\"int\"},{name:\"fullname\",type:\"string\"},{name:\"avatar\",type:\"string\"},{name:\"studentid\",type:\"int\"},{name:\"email\",type:\"string\"},{name:\"group\",type:\"string\"},{name:\"course\",type:\"string\"}]}});Ext.define(\"Igor.model.Subject\",{extend:\"Ext.data.Model\",config:{fields:[\"subject_id\",\"subject_name\",\"subject_code\",\"class_count\",],}});Ext.define(\"Igor.view.authenticate.Register\",{extend:\"Ext.form.Panel\",xtype:\"registerForm\",config:{title:\"Register\",items:[{xtype:\"image\",cls:\"logo\",ui:\"light\",width:100,height:45,src:\"resources/images/Igor.png\"},{xtype:\"fieldset\",title:\"Register\",instructions:\"Email and Password are required.",1127,35,"Full Name\",name:\"full",1174,63,"passwordfield\",label:\"Password\",name:\"password\"},{xtype:\"textfield\",label:\"Student ID\",name:\"studentid\"},{xtype:\"datepickerfield\",name:\"dob\",label:\"DOB\",value:new Date(\"3/19/1989\"),picker:{yearFrom:1989}},{xtype:\"selectfield\",label:\"Course\",name:\"course\",valueField:\"course\",displayField:\"title\",store:{data:[{course:\"52\",title:\"Course 52\"},{course:\"53\",title:\"Course 53\"},{course:\"54\",title:\"Course 54\"},{course:\"55\",title:\"Course 55\"},{course:\"56\",title:\"Course 56\"}]}},{xtype:\"selectfield\",label:\"Group\",name:\"group\",valueField:\"groupid\",displayField:\"title\",store:{data:[{groupid:\"HTTT\",title:\"HTTT\"},{groupid:\"TTM\",title:\"TTM\"},{groupid:\"KHMT\",title:\"KHMT\"},{groupid:\"KTMT\",title:\"KTMT\"},{groupid:\"CNPM\",title:\"CNPM\"}]}}]},{xtype:\"button\",text:\"Register\",itemId:\"submitRegisterBtn\",ui:\"confirm\",margin:\"5\",}]}});Ext.define(\"Igor.controller.ClassDetails\",{extend:\"Ext.app.Controller\",views:[\"task.ClassDetails\"],init:function(){},config:{control:{jobListForm:{itemSelected:\"viewJobDetails\",},addJobToClassSubmit:{onTap:\"addJobClass\",},deleteClassSubmit:{onTap:\"deleteClass\",},addClassToUserSubmit:{onTap:\"addClassToUser\"}},routes:{\"classdetails/:id\":\"doClassDetails\"},refs:{classDetailsForm:\"#classDetailsForm\",deleteClassSubmit:\"#deleteClassSubmit\",addJobToClassSubmit:\"#addJobToClassSubmit\",addClassToUserSubmit:\"#addClassToUserSubmit\",jobListForm:\"#jobListForm\"},before:{doClassDetails:[\"getClassDetails\",\"getJobsList\"],deleteClass:[\"checkValidationDeletingClass\"],},},doClassDetails:function(){},getClassDetails:function(a){},getJobsList:function(b,a){},viewJobDetails:function(a){this.redirectTo(\"url\")},addJobClass:function(a,b){this.redirectTo(\"url\")},deleteClass:function(a){},checkValidationDeletingClass:function(){},addClassToUser:function(a,b){},});Ext.define(\"Igor.store.Notifications\",{extend:\"Ext.data.Store\",config:{model:\"Igor.model.Notification\",pageSize:5,autoLoad:true,sorters:\"date\",grouper:{groupFn:function(a){return a.get(\"!username\")}}}});Ext.define(\"Igor.store.Users\",{extend:\"Ext.data.Store\",requires:[\"Ext.data.proxy.LocalStorage\"],config:{model:\"Igor.model.User\",autoSync:true,proxy:{type:\"localstorage\",id:\"usersStorage\"},autoload:true,}});Ext.define(\"Igor.store.Profiles\",{extend:\"Ext.data.Store\",config:{model:\"Igor.model.Profile\",pageSize:5,autoLoad:true,sorters:\"date\",grouper:{groupFn:function(a){return a.get(\"!username\")}},}});Ext.define(\"Igor.store.Tasks\",{extend:\"Ext.data.Store\",config:{model:\"Igor.model.Task\",pageSize:5,autoLoad:true,sorters:\"session_start\",groupField:\"period\",groupDir:\"DESC\",grouper:{groupFn:function(a){return a.get(\"!period\")}},}});Ext.define(\"Igor.store.Classdetails\",{extend:\"Ext.data.Store\",config:{model:\"Igor.model.Classdetail\",autoLoad:true,}});Ext.define(\"Igor.store.Classprojects\",{extend:\"Ext.data.Store\",config:{model:\"Igor.model.Classproject\",autoLoad:true,}});Ext.define(\"Igor.store.Classtasks\",{extend:\"Ext.data.Store\",config:{model:\"Igor.model.Classtask\",autoLoad:true,}});Ext.define(\"Igor.store.Projectmembers\",{extend:\"Ext.data.Store\",config:{model:\"Igor.model.Projectmember\",autoLoad:true,}});Ext.define(\"Igor.store.Projectjobs\",{extend:\"Ext.data.Store\",config:{model:\"Igor.model.Projectjob\",autoLoad:true,}});Ext.define(\"Igor.store.Classusers\",{extend:\"Ext.data.Store\",config:{model:\"Igor.model.Classuser\",pageSize:5,autoLoad:true,sorters:\"date\",grouper:{groupFn:function(a){return a.get(\"!username\")}}}});Ext.define(\"Igor.store.Subjects\",{extend:\"Ext.data.Store\",config:{model:\"Igor.model.Subject\",autoLoad:true,}});Ext.define(\"Igor.view.notification.News\",{extend:\"Ext.navigation.View\",xtype:\"updatesListForm\",requires:[\"Ext.List\"],config:{autoDestroy:true,navigationBar:{defaults:{hideAnimation:Ext.os.is.Android?false:{type:\"fadeOut\",duration:200},showAnimation:Ext.os.is.Android?false:{type:\"fadeIn\",duration:200}},items:[{xtype:\"image\",docked:\"top\",ui:\"light\",width:100,height:45,src:\"resources/images/Igor.png\"},{xtype:\"button\",itemId:\"refreshNewsButton\",iconCls:\"time_repeat\",iconMask:true,ui:\"plain\",align:\"right\"}]},items:[{xtype:\"list\",itemId:\"updateList\",title:\"News\",cls:\"x-feeds\",disclosure:true,onItemDisclosure:true,limit:5,disableSelection:true,plugins:[{xclass:\"Ext.plugin.ListPaging\"},{xclass:\"Ext.plugin.PullRefresh\"}],store:\"Notifications\",itemTpl:['<div class=\"feed\" style=\"background-image:url(resources/images/headshots/{avatar});\"></div>',\"{username}\",'<span>{action} <a href=\"\">{object}</a></span>',].join(\"\"),},]}});Ext.define(\"Igor.view.about.About\",{extend:\"Ext.navigation.View\",xtype:\"aboutPage\",requires:[\"Ext.List\"],config:{autoDestroy:true,navigationBar:{items:[{xtype:\"image\",docked:\"top\",ui:\"light\",width:100,height:45,src:\"resources/images/Igor.png\"}]},items:[{xtype:\"container\",title:\"About Igor\"}]}});Ext.define(\"Igor.view.task.New\",{extend:\"Ext.Container\",xtype:\"newTask\",requires:[\"Ext.List\",\"Igor.store.Subjects\"],config:{title:\"New Scheduler\",iconCls:\"team\",layout:\"vbox\",autoDestroy:true,items:[{xtype:\"fieldset\",margin:15,items:[{xtype:\"searchfield\",itemId:\"subjectSearch\",flex:1,scrollable:false,height:\"42px\",placeHolder:\"Search...\",}]},{xtype:\"list\",ui:\"round\",itemId:\"subjectList\",cls:\"x-feeds\",flex:1,disclosure:true,limit:5,listeners:{itemtap:function(c,b,d,a){alert(a.data.subject_id)}},emptyText:'<div style=\"margin-top: 20px; text-align: center\">No Matching Subject</div>',plugins:[{xclass:\"Ext.plugin.ListPaging\"},{xclass:\"Ext.plugin.PullRefresh\"}],store:\"Subjects\",itemTpl:['<div class=\"feed\" style=\"background-image:url(resources/images/subject-icon.png);\"></div>',\"{subject_name}\",\"<span>ID: {subject_code} - {class_count} class(es)</span>\",].join(\"\"),items:[{xtype:\"listitemheader\",cls:\"dark\",html:\"Subject List\"}],},]}});Ext.define(\"Igor.utility.ux.PathMenu\",{mixins:[\"Ext.mixin.Observable\"],xtype:\"pathmenu\",requires:[\"Ext.Button\",\"Ext.util.DelayedTask\"],config:{cls:\"x-ux-pathmenu\",top:null,bottom:null,right:null,left:null,height:40,width:40,items:[],radius:150,menuButtonDefault:{iconCls:\"add\",ui:\"pathmenu\",iconMask:true,isOpen:false,pathButtonType:\"menu\",cls:\"menubutton\"},menuItemDefault:{iconMask:true,ui:\"pathmenu\",isActive:false,pathButtonType:\"menuitem\"},menuItems:null,menuTrigger:null},constructor:function(c){this.initConfig(c);var d=this,b=[],a={xtype:\"button\",top:this.getTop(),bottom:this.getBottom(),right:this.getRight(),left:this.getLeft(),height:this.getHeight(),width:this.getWidth()},e=this.getMenuButtonDefault(),f=this.getMenuItemDefault();Ext.each(c.items,function(h,g){var i=Ext.apply(h,f,a);Ext.apply(i,{handler:d.onMenuItemButtonTap,scope:d});b.push(h);delete (h)},this);b.push(Ext.apply({handler:d.onMenuButtonTap,scope:d},e,a));Ext.Viewport.add(b)},onMenuItemButtonTap:function(b){var c=this,a=Ext.ComponentQuery.query(\"button[pathButtonType=menu]\")[0];b.addCls(\"tapped\");c.close(a);b.fireEvent(\"itemtap\",c,b)},onMenuButtonTap:function(a){if(!a.isOpen){this.open(a)}else{this.close(a)}},open:function(d){var c=Ext.ComponentQuery.query(\"button[pathButtonType=menuitem]\"),b=d.getBottom(),f=d.getLeft(),a=150,e=c.length-1;angle=180/e;d.replaceCls(\"close\",\"open\");Ext.each(c,function(i,h){i.addCls(\"menuitembutton\");i.replaceCls(\"close\",\"open\");var k=(180-(angle*(e-h))),j=Math.PI/180,l=j*k,g=Math.round(Math.cos(l)*a),m=Math.round(Math.sin(l)*a);i.setLeft(f+g);i.setBottom(b+m)});d.isOpen=true},close:function(b){var a=Ext.ComponentQuery.query(\"button[pathButtonType=menuitem]\");b.replaceCls(\"open\",\"close\");Ext.each(a,function(f,d,h,g){b=Ext.ComponentQuery.query(\"button[pathButtonType=menu]\")[0];if(f.getCls().indexOf(\"tapped\")===-1){f.replaceCls(\"open\",\"close\");f.setLeft(b.getLeft());f.setBottom(b.getBottom())}else{var c=Ext.create(\"Ext.util.DelayedTask\",function(){f.removeCls(\"menuitembutton\");f.setLeft(b.getLeft());f.setBottom(b.getBottom());f.removeCls(\"tapped\")});c.delay(900)}});b.isOpen=false}});Ext.define(\"Igor.utility.ux.AccordionList\",{alternateClassName:\"Ext.AccordionList\",extend:\"Ext.Container\",xtype:\"accordionlist\",requires:[\"Ext.data.Store\",\"Ext.dataview.DataView\",\"Ext.Anim\",\"Ext.XTemplate\",\"Ext.data.NodeStore\",\"Ext.data.TreeStore\"],config:{cls:Ext.baseCSSPrefix+\"accordion-list\",layout:{type:\"fit\"},store:null,displayField:\"text\",listScrollable:true,headerItemTpl:['<div style=\"background-color:#fff;',' min-height: 2.6em; padding: 0.4em 0.2em;\">','<tpl if=\"this.isExpanded(values)\">','<span class=\"x-button x-button-plain\">','<span class=\"x-button-icon arrow_down x-icon-mask\"',' style=\"margin-right:0.4em;\"></span>','<span style=\"color:#00bbe8;\">{text}</span>',\"</span>\",\"<tpl else>\",'<span class=\"x-button x-button-plain\">','<span class=\"x-button-icon arrow_right x-icon-mask\"',' style=\"margin-right:0.4em;\"></span>','<span style=\"color:#00bbe8;\">{text}</span>',\"</span>\",\"<tpl>\",\"</div>\"].join(\"\"),contentItemTpl:['<div style=\"background-color:#fff;',\" min-height: 2.6em; padding: 0.65em 0.8em;\",' border-bottom: 1px solid #dedede;\">',\"{text}\",\"</div>\"].join(\"\"),defaultExpanded:false,useAnimation:true,list:null},initialize:function(){this.doInitialize();this.callParent(arguments)},doInitialize:function(){if(this.getDefaultExpanded()){this.doAllExpanded()}},doAllExpanded:function(){var c=this.getList(),a=c.getStore();function b(d){d.expand();if(!d.isLeaf()){d.childNodes.forEach(b,this)}}a.each(b,this)},updateStore:function(a,d){var b=this.getList(),c;if(!b){c=new Ext.XTemplate('<tpl if=\"leaf\">','<div class=\"accordion-list-content\">',this.getContentItemTpl(),\"</div>\",\"<tpl else>\",'<div class=\"accordion-list-header\">',this.getHeaderItemTpl(),\"</div>\",\"</tpl>\",{isExpanded:function(e){return e.expanded}});b=Ext.create(\"Ext.dataview.DataView\",{itemTpl:c});b.on(\"itemtap\",this.onItemTap,this);this.setList(b);b.setScrollable(this.getListScrollable());this.add(b)}b.setStore(a)},updateListScrollable:function(a,c){var b=this.getList();if(b){b.setScrollable(a)}},onItemTap:function(f,c,h,a,g){var b=f.getStore(),d=b.getAt(c);this.fireEvent(\"itemtap\",this,f,c,h,a,g);if(d.isLeaf()){this.fireEvent(\"leafitemtap\",f,c,h,a,g)}else{if(d.isExpanded()){d.collapse()}else{d.expand(false,this.onExpand,this)}}},onExpand:function(){if(!this.getUseAnimation()){return}var a=this.getTargetItems()},getTargetItems:function(){var f=Ext.query(\".\"+this.getCls()+\" .x-dataview-item\"),c=false,a=[],e;for(var b=0;b<f.length;b++){e=Ext.get(f[b]);if(e.hasCls(\"x-item-selected\")){c=true;continue}if(c){var d=e.down(\".accordion-list-content\");if(d){a.push(d)}else{break}}}return a}});Ext.define(\"Igor.view.profile.Edit\",{extend:\"Ext.form.Panel\",xtype:\"profileEdit\",config:{title:\"Edit",1028,48,"Edit\",instructions:\"Input valid Student ID and Email.",1127,35,"Full Name\",name:\"fullname\"},{xtype:\"textfield\",label:\"Student ID\",name:\"studentid\"},{xtype:\"selectfield\",label:\"Course\",name:\"course\",valueField:\"course\",displayField:\"title\",store:{data:[{course:\"52\",title:\"Course 52\"},{course:\"53\",title:\"Course 53\"},{course:\"54\",title:\"Course 54\"},{course:\"55\",title:\"Course 55\"},{course:\"56\",title:\"Course 56\"}]}},{xtype:\"selectfield\",label:\"Group\",name:\"group\",valueField:\"groupid\",displayField:\"title\",store:{data:[{groupid:\"1\",title:\"HTTT\"},{groupid:\"2\",title:\"TTM\"},{groupid:\"3\",title:\"KHMT\"},{groupid:\"4\",title:\"KTMT\"},{groupid:\"5\",title:\"CNPM\"}]}}]},{xtype:\"toolbar\",docked:\"bottom\",items:[{text:\"Save\",ui:\"confirm\",scope:this,handler:function(){var a=this.form;a.setMasked({xtype:\"loadmask\",message:\"Saving...\"});setTimeout(function(){if(a.user){a.updateRecord(a.user,true)}a.setMasked(false)},1000)}},{xtype:\"spacer\"},{text:\"Reset\",handler:function(){Ext.getCmp(\"profileEdit\").reset()}}]}]}});Ext.define(\"Igor.view.MultiSelect\",{extend:\"Ext.field.Select\",alias:\"widget.multiselectfield\",xtype:\"multiselectfield\",usePicker:false,getTabletPicker:function(){var a=this.getDefaultTabletPickerConfig();if(!(this.listPanel)){this.listPanel=Ext.create(\"Ext.Panel\",Ext.apply({centered:true,modal:true,cls:Ext.baseCSSPrefix+\"select-overlay\",layout:\"fit\",hideOnMaskTap:false,items:{xtype:\"list\",mode:\"MULTI\",store:this.getStore(),itemTpl:'<span class=\"x-list-label\">{'+this.getDisplayField()+\"}</span>\",listeners:{select:this.onListSelect,itemtap:this.onListTap,hide:this.onListHide,scope:this},items:{xtype:\"button\",text:\"Done\",ui:\"action\",height:\"20px\",width:\"50%\",docked:\"bottom\",style:\"margin-top: 10px; margin-bottom: 10px; margin-left: auto; margin-right: auto;\",listeners:{tap:this.onButtonTap,scope:this}}}},a))}return this.listPanel},applyValue:function(c){var a=c,b=new Array(),d=new Array();d=(c==null?\"\":c.split(\",\"));if((c!=null)&&c.trim().localeCompare(\"\")){for(v=0;v<d.length;v++){item=this.getStore().find(this.getValueField(),d[v],null,null,null,true);b.push(this.getOptions()[item].get(this.getDisplayField()))}}this.element.dom.lastChild.firstChild.firstChild.value=b.join(\", \");return a},updateValue:function(b,a){this.previousRecord=a;this.record=b;this.fireEvent(\"change\",this,b,a)},getValue:function(){var a=this.record;return(a)},showPicker:function(){if(this.getStore().getCount()===0){return}if(this.getReadOnly()){return}this.isFocused=true;if(this.getUsePicker()){var d=this.getPhonePicker(),a=this.getName(),h={};h[a]=this.record.get(this.getValueField());d.setValue(h);if(!d.getParent()){Ext.Viewport.add(d)}d.show()}else{var f=this.getTabletPicker(),e=f.down(\"list\"),i=e.getStore(),c=new Array(),k=(this.getValue()==null?\"\":this.getValue().split(\",\")),j=0,g=k.length;if(!f.getParent()){Ext.Viewport.add(f)}for(j=0;j<g;j++){c.push(k[j])}j=0;for(j=0;j<g;j++){var b=i.findRecord(this.getValueField(),c[j],0,true,false,false);e.select(b,true,false)}f.showBy(this.getComponent());f.down(\"list\").show()}},onListSelect:function(b,a){},onListTap:function(){},onButtonTap:function(){this.setValue(\"\");this.listPanel.down(\"list\").hide();this.listPanel.hide({type:\"fade\",out:true,scope:this})},onListHide:function(d,c){var b=this,g=this.listPanel.down(\"list\").selected.items,f=new Array(),a=0,e=g.length;for(a=0;a<e;a++){if(g[a].data[this.getDisplayField()]){f.push(g[a].data[this.getValueField()])}}if(f.length>0){b.setValue(f.join(\",\"));this.listPanel.down(\"list\").deselectAll()}else{b.setValue(null)}}});Ext.define(\"Igor.view.task.ClassTaskDetails\",{extend:\"Ext.Container\",xtype:\"classTaskDetailsForm\",itemId:\"classTaskDetailsForm\",requires:[\"Ext.List\",\"Igor.store.Classtasks\"],config:{layout:\"vbox\",cls:\"userInfo\",title:\"Job Detail\",items:[{xtype:\"dataview\",itemId:\"taskDetailPanel\",flex:1,scrollable:true,store:\"Classtasks\",itemTpl:['<div class=\"header\">','   <div class=\"avatar\" style=\"background-image:url(resources/images/task-icon.png);\"></div>',\"   <h3>{name}</h3>\",\"   <h4>{location}</h4>\",\"</div>\",'<div class=\"x-container x-form-fieldset nonEditable\" style=\"padding: 1em;\">','<div class=\"x-docking-vertical\">','<div class=\"x-body\">','<div class=\"x-inner x-form-fieldset-inner\">','<div class=\"x-container x-field-text x-field x-label-align-left x-field-labeled x-form-label-nowrap x-empty\">','<div class=\"x-form-label\" style=\"width: 30% !important;\">',\"<span>Start Time</span>\",\"</div>\",'<div class=\"x-component-outer\">','<div class=\"x-field-input\">','<input class=\"x-input-el x-form-field x-input-text\" type=\"text\" value=\"{start_time}\">','<div class=\"x-field-mask\" style=\"display: none !important; \"></div>',\"</div>\",\"</div>\",\"</div>\",'<div class=\"x-container x-field x-field-text x-label-align-left x-field-labeled x-form-label-nowrap x-empty\">','<div class=\"x-form-label\" style=\"width: 30% !important; \">',\"<span>End Time</span>\",\"</div>\",'<div class=\"x-component-outer\">','<div class=\"x-field-input\">','<input class=\"x-input-el x-form-field x-input-email\" type=\"email\" value=\"{end_time}\">','<div class=\"x-field-mask\" style=\"display: none !important; \"></div>',\"</div>\",\"</div>\",\"</div>\",'<div class=\"x-container x-field-text x-field x-label-align-left x-field-labeled x-form-label-nowrap x-empty\">','<div class=\"x-form-label\" style=\"width: 30% !important; \">',\"<span>Note</span>\",\"</div>\",'<div class=\"x-component-outer\">','<divclass=\"x-field-input\">','<input class=\"x-input-el x-form-field x-input-email\" type=\"text\" value=\"{note}\">','<div class=\"x-field-mask\" style=\"display: none !important; \"></div>',\"</div>\",\"</div>\",\"</div>\",\"</div>\",\"</div>\",\"</div>\",\"</div>\"].join(\"\"),},{xtype:\"toolbar\",docked:\"bottom\",items:[{text:\"Mark Completed\",ui:\"confirm\",scope:this,handler:function(){}},{xtype:\"spacer\"},{text:\"Mark Incompeleted\",ui:\"decline\",handler:function(){}}]}]}});Ext.define(\"Igor.utility.picker.Time\",{extend:\"Ext.picker.Picker\",xtype:\"timepicker\",config:{increment:5,minHours:0,maxHours:23,hoursTitle:\"Hours\",minutesTitle:\"Minutes\",slots:[]},setValue:function(d,c){var a=this.getInitialConfig().increment,b;if(Ext.isDate(d)){d={hours:d.getHours(),minutes:d.getMinutes()}}b=d.minutes%a;if(b>0){d.minutes=Math.round(d.minutes/a)*a}this.callParent([d,c])},getValue:function(){var b=this.callParent(arguments),a=new Date();b=new Date(a.getFullYear(),a.getMonth(),a.getDate(),b.hours,b.minutes);return b},applySlots:function(c){var d=this,a=d.createHoursSlot(),b=d.createMinutesSlot();return[a,b]},createHoursSlot:function(){var c=this,j=c.getInitialConfig(),e=j.hoursTitle,d=j.minHours,b=j.maxHours,f=[],g;for(var a=d;a<=b;a++){var h=(a<10)?(\"0\"+a):a;f.push({text:h,value:a})}g={name:\"hours\",align:\"center\",title:e,data:f,flex:1};return g},createMinutesSlot:function(){var d=this,e=d.getInitialConfig(),g=e.minutesTitle,a=e.increment,c=[],h;for(var b=0;b<60;b+=a){var f;f=(b<10)?(\"0\"+b):b;c.push({text:f,value:b})}h={name:\"minutes\",align:\"center\",title:g,data:c,flex:1};return h}});Ext.define(\"Igor.view.task.JobDetails\",{extend:\"Ext.Container\",xtype:\"jobDetailsForm\",itemId:\"jobDetailsForm\",requires:[\"Ext.List\",\"Igor.store.Projectjobs\"],config:{layout:\"vbox\",cls:\"userInfo\",title:\"Job Detail\",items:[{xtype:\"dataview\",itemId:\"jobDetailPanel\",flex:1,scrollable:true,store:\"Projectjobs\",itemTpl:['<div class=\"header\">','   <div class=\"avatar\" style=\"background-image:url(resources/images/task-icon.png);\"></div>',\"   <h3>{name}</h3>\",\"   <h4>{location}</h4>\",\"</div>\",'<div class=\"x-container x-form-fieldset nonEditable\" style=\"padding: 1em;\">','<div class=\"x-docking-vertical\">','<div class=\"x-body\">','<div class=\"x-inner x-form-fieldset-inner\">','<div class=\"x-container x-field-text x-field x-label-align-left x-field-labeled x-form-label-nowrap x-empty\">','<div class=\"x-form-label\" style=\"width: 30% !important;\">',\"<span>Start Time</span>\",\"</div>\",'<div class=\"x-component-outer\">','<div class=\"x-field-input\">','<input class=\"x-input-el x-form-field x-input-text\" type=\"text\" value=\"{start_time}\">','<div class=\"x-field-mask\" style=\"display: none !important; \"></div>',\"</div>\",\"</div>\",\"</div>\",'<div class=\"x-container x-field x-field-text x-label-align-left x-field-labeled x-form-label-nowrap x-empty\">','<div class=\"x-form-label\" style=\"width: 30% !important; \">',\"<span>End Time</span>\",\"</div>\",'<div class=\"x-component-outer\">','<div class=\"x-field-input\">','<input class=\"x-input-el x-form-field x-input-email\" type=\"email\" value=\"{end_time}\">','<div class=\"x-field-mask\" style=\"display: none !important; \"></div>',\"</div>\",\"</div>\",\"</div>\",'<div class=\"x-container x-field-text x-field x-label-align-left x-field-labeled x-form-label-nowrap x-empty\">','<div class=\"x-form-label\" style=\"width: 30% !important; \">',\"<span>Note</span>\",\"</div>\",'<div class=\"x-component-outer\">','<divclass=\"x-field-input\">','<input class=\"x-input-el x-form-field x-input-email\" type=\"text\" value=\"{note}\">','<div class=\"x-field-mask\" style=\"display: none !important; \"></div>',\"</div>\",\"</div>\",\"</div>\",\"</div>\",\"</div>\",\"</div>\",\"</div>\"].join(\"\"),},{xtype:\"toolbar\",docked:\"bottom\",items:[{text:\"Mark Completed\",ui:\"confirm\",scope:this,handler:function(){}},{xtype:\"spacer\"},{text:\"Mark Incompeleted\",ui:\"decline\",handler:function(){}}]}]},initialize:function(){var a=Ext.data.StoreManager.lookup(\"Projectjobs\");a.load({callback:function(c,b,d){},scope:this})}});Ext.define(\"Igor.view.authenticate.Authenticate\",{extend:\"Ext.navigation.View\",xtype:\"authenForm\",requires:[\"Igor.view.authenticate.Register\"],config:{items:[{xtype:\"formpanel\",itemId:\"loginForm\",title:\"Login\",iconCls:\"team\",layout:\"vbox\",items:[{xtype:\"image\",cls:\"logo\",ui:\"light\",width:100,height:45,src:\"resources/images/Igor.png\"},{xtype:\"fieldset\",title:\"Login\",instructions:\"Email and Password are required.\",items:[",1181,56,"passwordfield\",label:\"Password\",name:\"password\"}]},{xtype:\"button\",text:\"Login\",itemId:\"submitBtn\",ui:\"confirm\",margin:\"5\",},{xtype:\"button\",ui:\"decline\",itemId:\"registerBtn\",text:\"Register\",margin:\"5\",}]}]}});Ext.define(\"Igor.view.profile.Profile\",{extend:\"Ext.navigation.View\",xtype:\"userDetailsForm\",requires:[\"Ext.List\",\"Igor.store.Users\",\"Igor.view.profile.Edit\",],config:{autoDestroy:true,navigationBar:{defaults:{hideAnimation:Ext.os.is.Android?false:{type:\"fadeOut\",duration:200},showAnimation:Ext.os.is.Android?false:{type:\"fadeIn\",duration:200}},items:[{xtype:\"button\",itemId:\"logoutButton\",iconCls:\"reply\",iconMask:true,ui:\"plain\",align:\"right\",handler:function(){var a=Ext.getStore(\"Users\");a.removeAll();a.sync();Ext.Viewport.setActiveItem(Ext.create(\"Igor.view.authenticate.Authenticate\"),{type:\"slide\"})}},{xtype:\"button\",itemId:\"editProfileButton\",iconCls:\"compose\",iconMask:true,ui:\"plain\",align:\"right",1335,36,"navigationview\");a.push({xtype:\"profileEdit\"});this.hide()}}]},items:[{xtype:\"container\",layout:\"vbox\",cls:\"userInfo\",title:\"Profile\",items:[{xtype:\"dataview\",flex:1,scrollable:true,store:\"Users\",itemTpl:['<div class=\"header\">','   <div class=\"avatar\" style=\"background-image:url(resources/images/headshots/{avatar});\"></div>',\"   <h3>{fullname}</h3>\",\"   <h4>{group} - Course {course}</h4>\",\"</div>\",'<div class=\"x-container x-form-fieldset nonEditable\" style=\"padding: 1em;\">','<div class=\"x-docking-vertical\">','<div class=\"x-body\">','<div class=\"x-inner x-form-fieldset-inner\">','<div class=\"x-container x-field-text x-field x-label-align-left x-field-labeled x-form-label-nowrap x-empty\">','<div class=\"x-form-label\" style=\"width: 30% !important;\">',\"<span>Student ID</span>\",\"</div>\",'<div class=\"x-component-outer\">','<div class=\"x-field-input\">','<input class=\"x-input-el x-form-field x-input-text\" type=\"text\" value=\"{studentid}\">','<div class=\"x-field-mask\" style=\"display: none !important; \"></div>',\"</div>\",\"</div>\",\"</div>\",'<div class=\"x-container x-field x-field-text x-label-align-left x-field-labeled x-form-label-nowrap x-empty\">','<div class=\"x-form-label\" style=\"width: 30% !important; \">',\"<span>Email</span>\",\"</div>\",'<div class=\"x-component-outer\">','<div class=\"x-field-input\">','<input class=\"x-input-el x-form-field x-input-email\" type=\"email\" value=\"{email}\">','<div class=\"x-field-mask\" style=\"display: none !important; \"></div>',\"</div>\",\"</div>\",\"</div>\",\"</div>\",\"</div>\",\"</div>\",\"</div>\"].join(\"\")}]}]}});Ext.define(\"Igor.view.task.NewProject\",{extend:\"Ext.form.Panel\",xtype:\"newProjectForm\",itemId:\"newProjectForm\",requires:[\"Igor.store.Classusers\",\"Igor.view.MultiSelect\"],config:{title:\"New Project\",layout:\"vbox\",classid:null",1043,33,"New Project\",instructions:\"Enter Required Information.",1127,62,"textfield\",label:\"Description\",name:\"description\"},{xtype:\"multiselectfield\",usePicker:false,itemId:\"userListField\",label:\"Select Member\",name:\"members\",valueField:\"userid\",displayField:\"fullname\",}]},{xtype:\"toolbar\",docked:\"bottom\",items:[{text:\"Save\",ui:\"confirm\",scope:this,handler:function(){var a=this.form;a.setMasked({xtype:\"loadmask\",message:\"Saving...\"});setTimeout(function(){if(a.user){a.updateRecord(a.user,true)}a.setMasked(false)},1000)}},{xtype:\"spacer\"},{text:\"Reset\",handler:function(){Ext.getCmp(\"newProjectForm\").reset()}}]}]}});Ext.define(\"Igor.utility.picker.TimePicker\",{extend:\"Ext.field.DatePicker\",xtype:\"timepickerfield\",requires:[\"Igor.utility.picker.Time\"],config:{dateFormat:\"H:i\",picker:true},applyValue:function(d){if(!Ext.isDate(d)&&!Ext.isObject(d)){d=null}if(Ext.isObject(d)){var b=new Date(),c=d.year||b.getFullYear(),e=d.month||b.getMonth(),a=d.day||b.getDate();d=new Date(c,e,a,d.hours,d.minutes)}return d},applyPicker:function(a){a=Ext.factory(a,\"Igor.utility.picker.Time\");a.setHidden(true);Ext.Viewport.add(a);return a},updatePicker:function(a){a.on({scope:this,change:\"onPickerChange\",hide:\"onPickerHide\"});a.setValue(this.getValue());return a}});Ext.define(\"Igor.view.task.NewClassTask\",{extend:\"Ext.form.Panel\",xtype:\"newClassTaskForm\",itemId:\"newClassTaskForm\",requires:[\"Igor.utility.picker.TimePicker\"],config:{title:\"New Class Task",1028,48,"New Class Task\",instructions:\"Enter Required Information.",1127,62,"textfield\",label:\"Location\",name:\"location",1226,33,"Note\",name:\"note\",height:90},{xtype:\"datepickerfield\",name:\"startdate\",label:\"Start Date\",value:new Date(),picker:{yearFrom:2000}},{xtype:\"timepickerfield\",label:\"Start Time\",value:new Date(),name:\"starttime\",picker:{height:300,}},{xtype:\"datepickerfield\",name:\"enddate\",label:\"Deadline Date\",value:new Date(),picker:{yearFrom:2000}},{xtype:\"timepickerfield\",label:\"Deadline Time\",value:new Date(),name:\"endtime\",picker:{height:300,}}]},{xtype:\"toolbar\",docked:\"bottom\",items:[{text:\"Save\",ui:\"confirm\",scope:this,handler:function(){var a=this.form;a.setMasked({xtype:\"loadmask\",message:\"Saving...\"});setTimeout(function(){if(a.user){a.updateRecord(a.user,true)}a.setMasked(false)},1000)}},{xtype:\"spacer\"},{text:\"Reset\",handler:function(){Ext.getCmp(\"newClassTaskForm\").reset()}}]}]}});Ext.define(\"Igor.view.task.ProjectDetails\",{extend:\"Ext.Container\",xtype:\"projectDetailsForm\",itemId:\"projectDetailsForm\",requires:[\"Ext.List\",\"Igor.view.task.JobDetails\",\"Igor.store.Classprojects\",\"Igor.store.Projectmembers\",\"Igor.store.Projectjobs\"],config:{layout:\"vbox\",cls:\"userInfo\",title:\"Project Detail\",items:[{xtype:\"dataview\",itemId:\"projectDetailPanel\",height:\"97px\",flex:2,scrollable:false,store:\"Classprojects\",itemTpl:['<div class=\"header\">','   <div class=\"avatar\" style=\"background-image:url(resources/images/project_icon.png);\"></div>',\"   <h3>{name}</h3>\",\"   <h4>{description}</h4>\",\"</div>\"].join(\"\"),},{xtype:\"list\",itemId:\"projectMemberList\",store:\"Projectmembers\",disclosure:true,onItemDisclosure:true,flex:1,cls:\"x-feeds\",itemTpl:['<div class=\"feed\" style=\"background-image:url(resources/images/headshots/{avatar});\"></div>',\"{fullname}\",\"<span>{studentid}-{group}C{course}-{email}</span>\",].join(\"\"),items:[{xtype:\"listitemheader\",cls:\"dark\",html:\"Members\"}],listeners:{itemtap:function(c,b,d,a){var e=c.getStore().getAt(b);Ext.Msg.alert(\"Test\",\"Redirect to userid \"+e.get(\"userid\"))}}},{xtype:\"list\",itemId:\"projectJobList\",store:\"Projectjobs\",disclosure:true,onItemDisclosure:true,flex:1,cls:\"x-feeds\",itemTpl:['<div class=\"feed\" style=\"background-image:url(resources/images/{status}.png);\"></div>',\"{name}\",\"<span>{start_time} at {location}</span>\",].join(\"\"),items:[{xtype:\"listitemheader\",cls:\"dark\",html:\"Jobs\"}],listeners:{itemtap:function(c,b,e,a){var d=this.up(\"navigationview\");d.push({xtype:\"jobDetailsForm\"})}}},]},initialize:function(){var a=Ext.data.StoreManager.lookup(\"Projectmembers\");a.load({callback:function(c,b,d){},scope:this})}});Ext.define(\"Igor.view.task.ClassDetails\",{extend:\"Ext.Container\",xtype:\"classDetailsForm\",itemId:\"classDetailsForm\",requires:[\"Ext.List\",\"Igor.view.task.ProjectDetails\",\"Igor.view.task.ClassTaskDetails\",\"Igor.store.Classdetails\",\"Igor.store.Classprojects\",\"Igor.store.Classtasks\"],config:{layout:\"vbox\",cls:\"userInfo\",title:\"Class Detail\",autoDestroy:true,items:[{xtype:\"dataview\",itemId:\"classDetailPanel\",flex:2,scrollable:true,store:\"Classdetails\",itemTpl:['<div class=\"header\">','   <div class=\"avatar\" style=\"background-image:url(resources/images/class-icon.png);\"></div>',\"   <h3>{subject_name}</h3>\",\"   <h4>ID: {class_code}-Code: {subject_code}</h4>\",\"</div>\",'<div class=\"x-container x-form-fieldset nonEditable\" style=\"padding: 1em;\">','<div class=\"x-docking-vertical\">','<div class=\"x-body\">','<div class=\"x-inner x-form-fieldset-inner\">','<div class=\"x-container x-field-text x-field x-label-align-left x-field-labeled x-form-label-nowrap x-empty\">','<div class=\"x-form-label\" style=\"width: 30% !important;\">',\"<span>Session</span>\",\"</div>\",'<div class=\"x-component-outer\">','<div class=\"x-field-input\">','<input class=\"x-input-el x-form-field x-input-text\" type=\"text\" value=\"{total_session}\">','<div class=\"x-field-mask\" style=\"display: none !important; \"></div>',\"</div>\",\"</div>\",\"</div>\",'<div class=\"x-container x-field x-field-text x-label-align-left x-field-labeled x-form-label-nowrap x-empty\">','<div class=\"x-form-label\" style=\"width: 30% !important; \">',\"<span>Teacher</span>\",\"</div>\",'<div class=\"x-component-outer\">','<div class=\"x-field-input\">','<input class=\"x-input-el x-form-field x-input-email\" type=\"email\" value=\"{teacher_name}\">','<div class=\"x-field-mask\" style=\"display: none !important; \"></div>',\"</div>\",\"</div>\",\"</div>\",'<div class=\"x-container x-field-text x-field x-label-align-left x-field-labeled x-form-label-nowrap x-empty\">','<div class=\"x-form-label\" style=\"width: 30% !important; \">',\"<span>Location</span>\",\"</div>\",'<div class=\"x-component-outer\">','<divclass=\"x-field-input\">','<input class=\"x-input-el x-form-field x-input-email\" type=\"text\" value=\"{location}\">','<div class=\"x-field-mask\" style=\"display: none !important; \"></div>',\"</div>\",\"</div>\",\"</div>\",\"</div>\",\"</div>\",\"</div>\",\"</div>\"].join(\"\"),},{xtype:\"list\",itemId:\"classProjectList\",store:\"Classprojects\",disclosure:true,onItemDisclosure:true,flex:1,cls:\"x-feeds\",itemTpl:['<div class=\"feed\" style=\"background-image:url(resources/images/project_icon.png);\"></div>',\"{name}\",\"<span>{description}</span>\",].join(\"\"),items:[{xtype:\"listitemheader\",cls:\"dark\",html:\"Projects\"}],listeners:{itemtap:function(c,b,e,a){var d=this.up(\"navigationview\");d.push({xtype:\"projectDetailsForm\"})}}},{xtype:\"list\",itemId:\"classTaskList\",store:\"Classtasks\",disclosure:true,onItemDisclosure:true,flex:1,cls:\"x-feeds\",itemTpl:['<div class=\"feed\" style=\"background-image:url(resources/images/{status}.png);\"></div>',\"{name}\",\"<span>{start_time} at {location}</span>\",].join(\"\"),items:[{xtype:\"listitemheader\",cls:\"dark\",html:\"Tasks\"}],listeners:{itemtap:function(c,b,e,a){var d=this.up(\"navigationview\");d.push({xtype:\"classTaskDetailsForm\"})}}},]},initialize:function(){}});Ext.define(\"Igor.controller.Main\",{extend:\"Ext.app.Controller\",requires:[\"Igor.view.task.NewProject\",\"Igor.view.task.NewClassTask\",\"Igor.view.task.ClassDetails\",\"Igor.view.task.New\",\"Igor.utility.ux.PathMenu\",\"Igor.utility.ux.AccordionList\",],init:function(){},config:{control:{updatesList:{itemtap:\"viewUpdateDetails\",disclose:\"viewUpdateDiscloseDetails\"},tasksListByDay:{itemtap:\"viewTaskDetails\",},userDetailsForm:{pop:\"onProfilePop\",},daySelBtn:{toggle:\"onDayToggle\",},tasksForm:{pop:\"onTaskPop\",push:\"onTaskPush\",initialize:\"onTaskInit\"},classDetailsForm:{initialize:\"classDetailInit\"},refreshNewsButton:{tap:\"onNotificationInit\"},updatesListForm:{initialize:\"onNewsInit\",},schedulerList:{itemtap:\"onTaskTap\",itemtaphold:\"onTaskTapHold\"},subjectSearch:{clearicontap:\"onSearchClearIconTap\",keyup:\"onSearchKeyUp\"},newProjectForm:{initialize:\"onNewProjectInit\"},mainPnl:{initialize:\"onNotificationInit\"},\"button[pathButtonType=menuitem]\":{itemtap:\"onPathMenuItemTap\"}},routes:{updates:\"doUpdates\",\"updates/Update/:id\":\"viewUpdateDetails\",\"tasks/:id\":\"doTasks\",\"tasks/taskbyday/:day_of_week\":\"showTasksByDay\",\"tasks/:id\":\"viewTaskDetails\",\"user/:id\":\"viewUserDetails\",\"user/frienddetails/:id\":\"viewFriendDetails\",\"user/classdetails/:id\":\"viewClassDetails\",},refs:{refreshNewsButton:\"updatesListForm #refreshNewsButton\",updatesListForm:\"updatesListForm\",daySelBtn:\"tasksForm #daySelectBtn\",mainPnl:\"mainpanel\",newProjectForm:\"newProjectForm\",classDetails:\"classDetailsForm\",schedulerList:\"tasksForm #schedulerList\",userListField:\"newProjectForm #userListField\",newSchedulerForm:\"newTask\",subjectSearch:\"newTask #subjectSearch\",subjectList:\"newTask #subjectList\",tasksForm:\"tasksForm\",addTaskBtn:\".tasksForm #addTaskBtn\",tasksListByDay:\"#tasksListByDay\",termSelBtn:\".tasksForm #termSelectBtn\",userDetailsForm:\"userDetailsForm\",editProfileButton:\"userDetailsForm #editProfileButton\",},before:{doTasks:[\"getCurrentTime\",\"getAllTasksByUser\"],},},testFunc:function(){var b=this.getMainPnl().getTabBar().getComponent(0)},onPathMenuItemTap:function(b,a){console.log(b,a)},onSearchKeyUp:function(f){var e=f.getValue(),b=this.getSubjectList().getStore();b.clearFilter();if(e){var d=e.split(\" \"),a=[],c;for(c=0;c<d.length;c++){if(!d[c]){continue}a.push(new RegExp(d[c],\"i\"))}b.filter(function(h){var g=[];for(c=0;c<a.length;c++){var j=a[c],i=h.get(\"subject_name\").match(j)||h.get(\"subject_code\").match(j);g.push(i)}if(a.length>1&&g.indexOf(false)!=-1){return false}else{return g[0]}})}},onSearchClearIconTap:function(){this.getSubjectList().getStore().clearFilter()},onNewsInit:function(){Ext.create(\"Igor.utility.ux.PathMenu\",{bottom:10,left:screen.width/2,items:[{iconCls:\"action\",cardIndex:0},{iconCls:\"add\",cardIndex:1},{iconCls:\"compose\",cardIndex:2},{iconCls:\"home\",cardIndex:3},{iconCls:\"refresh\",cardIndex:4}]})},classDetailInit:function(){},onTaskTap:function(d,c,e,a){var b=Ext.ComponentQuery.query(\"#termSelectBtn\")[0];window.location.href=\"index.html#tasks/\"+a.get(\"class_id\");b.hide()},onTaskTapHold:function(d,b,e,a){var c=Ext.getStore(\"Users\").getAt(0).get(\"userid\");Ext.Msg.confirm(\"Delete\",\"Are you sure you want to delete this scheduler ?\",function(f){if(f===\"yes\"){this.getMainPnl().setMasked({xtype:\"loadmask\",message:\"Loading...\"});Ext.data.JsonP.request({url:\"https://igor-assistant-ca-2012.appspot.com/igor/class_subject/call/jsonp/delete_class\",params:{user_id:c,class_id:a.get(\"class_id\")},disableCaching:false,success:function(g,h){mainPanel=Ext.ComponentQuery.query(\"mainpanel\")[0];mainPanel.unmask();if(g.status=\"OK\"){}}});console.log(a)}})},onTaskInit:function(){var b=this.getDaySelBtn();var a=new Date().getDay();if(a==0){b.setPressedButtons(6);this.showTasksByDay(6)}else{b.setPressedButtons(a-1);this.showTasksByDay(a-1)}this.getTermSelBtn().setHandler(function(){if(!this.picker){this.picker=Ext.Viewport.add({xtype:\"picker\",title:\"Select Term\",toolbar:{title:\"Select Term\"},slots:[{name:\"term\",title:\"Term\",data:[{text:\"20111\",value:20111},{text:\"20112\",value:20112},{text:\"20113\",value:20113},{text:\"20121\",value:20121}]}]})}this.picker.show()})},onNotificationInit:function(){this.getMainPnl().setMasked({xtype:\"loadmask\",message:\"Loading...\"});this.getMainPnl().getTabBar().getComponent(0).setBadgeText(null);var a=Ext.getStore(\"Users\").getAt(0).get(\"userid\");Ext.data.JsonP.request({url:\"https://igor-assistant-ca-2012.appspot.com/igor/notification/call/jsonp/get_all_notification\",params:{owner:a,},disableCaching:false,success:function(c,e){mainPanel=Ext.ComponentQuery.query(\"mainpanel\")[0];mainPanel.unmask();if(c.status=\"OK\"){var f=Ext.getStore(\"Notifications\"),b={},d=0;f.removeAll();Ext.Array.each(c.message,function(g){if(g.is_read==false){d++}if(g.avatar==null){g.avatar=\"default_male.png\"}b=Ext.create(\"Igor.model.Notification\",g);f.add(b);if(d!=0){mainPanel.getTabBar().getComponent(0).setBadgeText(d)}})}}})},onSubjectListInit:function(){this.getMainPnl().setMasked({xtype:\"loadmask\",message:\"Loading...\"});var a=Ext.getStore(\"Users\").getAt(0).get(\"userid\");Ext.data.JsonP.request({url:\"https://igor-assistant-ca-2012.appspot.com/igor/subject/call/jsonp/get_all_subjects\",disableCaching:false,success:function(b,e){mainPanel=Ext.ComponentQuery.query(\"mainpanel\")[0];mainPanel.unmask();if(b.status=\"OK\"){var d=Ext.getStore(\"Subjects\"),f={},c=0;d.removeAll();Ext.Array.each(b.message,function(g){f=Ext.create(\"Igor.model.Subject\",g);d.add(f)});Ext.ComponentQuery.query(\"#subjectList\")[0].setRecord(d.data.all)}}})},onNewProjectInit:function(){var b=this.getNewProjectForm().getClassid();var a=Ext.getStore(\"Classdetails\").getAt(0).get(\"class_id\");Ext.data.JsonP.request({url:\"https://igor-assistant-ca-2012.appspot.com/igor/user/call/jsonp/get_users_by_class\",params:{class_id:a,},disableCaching:false,success:function(c,d){mainPanel=Ext.ComponentQuery.query(\"mainpanel\")[0];mainPanel.unmask();if(c.status=\"OK\"){var e=Ext.getStore(\"Classusers\"),f={};e.removeAll();Ext.Array.each(c.message,function(g){f=Ext.create(\"Igor.model.Classuser\",g);e.add(f)})}}})},onDayToggle:function(a,c,d,b){window.location.href=\"index.html#tasks/taskbyday/\"+c.getItemId()},onProfilePop:function(){var a=this.getEditProfileButton();a.show()},onTaskPop:function(){var c=this.getTasksForm();var b=c.getPreviousItem();var a=this.getAddTaskBtn();if(b==null){a.setHandler(function(){var e=this.up(\"navigationview\");var d=Ext.ComponentQuery.query(\"#termSelectBtn\")[0];e.push({xtype:\"newTask\"});this.hide();d.hide()});this.getTermSelBtn().show();a.show()}else{if(b.getItemId().indexOf(\"scheduler\")!=-1){a.show();a.setHandler(this.getFuncForAddBtn(\"class\"))}else{if(b.getItemId().indexOf(\"classDetailsForm\")!=-1){a.show();a.setHandler(this.getFuncForAddBtn(\"project\"))}}}},onTaskPush:function(){var a=this.getTasksForm();var b=a.getActiveItem();if(b.getItemId().indexOf(\"classDetailsForm\")!=-1){this.getAddTaskBtn().setHandler(this.getFuncForAddBtn(\"class\"))}else{if(b.getItemId().indexOf(\"projectDetailsForm\")!=-1){this.getAddTaskBtn().setHandler(this.getFuncForAddBtn(\"project\"))}else{if(b.getItemId().indexOf(\"classTaskDetailsForm\")!=-1){this.getAddTaskBtn().hide()}else{if(b.getItemId().indexOf(\"jobDetailsForm\")!=-1){this.getAddTaskBtn().hide()}else{if(b.getItemId().indexOf(\"newTask\")!=-1){this.onSubjectListInit();this.getSubjectList().setStore(\"Subject\");this.getTermSelBtn().hide()}}}}}},viewUpdateDetails:function(c,b,d,a){var e=c.getStore().getAt(b);Ext.Msg.alert(\"Test\",\"1Redirect to objectid \"+e.get(\"objectid\"))},doTasks:function(){this.showTasksByUser()},getAllTasksByUser:function(a){},getCurrentTime:function(){},showTasksByUser:function(){},showTasksByDay:function(a){this.getMainPnl().setMasked({xtype:\"loadmask\",message:\"Loading...\"});var b=Ext.getStore(\"Users\").getAt(0).get(\"userid\");Ext.data.JsonP.request({url:\"https://igor-assistant-ca-2012.appspot.com/igor/class_subject/call/jsonp/get_classes_by_user_time\",params:{user_id:b,term:\"20111\",day_of_week:a},disableCaching:false,success:function(c,f){Ext.ComponentQuery.query(\"mainpanel\")[0].unmask();if(c.status=\"OK\"){var d=Ext.getStore(\"Tasks\"),e={};d.removeAll();Ext.Array.each(c.message,function(g){e=Ext.create(\"Igor.model.Task\",g);d.add(e)})}}})},viewTaskDetails:function(a){this.getMainPnl().setMasked({xtype:\"loadmask\",message:\"Loading...\"});Ext.data.JsonP.request({url:\"https://igor-assistant-ca-2012.appspot.com/igor/class_subject/call/jsonp/get_class_detail\",params:{id:a},disableCaching:false,success:function(b,e){Ext.ComponentQuery.query(\"mainpanel\")[0].unmask();if(b.status=\"OK\"){var c=Ext.getStore(\"Classdetails\"),d={};c.removeAll();Ext.Array.each(b.message,function(f){d=Ext.create(\"Igor.model.Classdetail\",f);c.add(d)});Ext.ComponentQuery.query(\"tasksForm\")[0].push({xtype:\"classDetailsForm\"})}}})},viewUserDetails:function(a){this.getMainPnl().setMasked({xtype:\"loadmask\",message:\"Loading...\"});Ext.data.JsonP.request({url:\"https://igor-assistant-ca-2012.appspot.com/igor/user/call/jsonp/get_user_detail\",params:{id:a},disableCaching:false,success:function(b,e){Ext.ComponentQuery.query(\"mainpanel\")[0].unmask();if(b.status=\"OK\"){var c=Ext.getStore(\"Profiles\"),d={};c.removeAll();Ext.Array.each(b.message,function(f){d=Ext.create(\"Igor.model.Profile\",f);c.add(d)})}}})},getUserDetails:function(a){},getClassesListByUser:function(a){},viewClassDetails:function(a){this.redirectTo(\"url\")},getFuncForAddBtn:function(c){var a=this.getTasksForm();var b=a.getActiveItem();if(c==\"class\"){return function(){this.actions=Ext.Viewport.add({xtype:\"actionsheet\",items:[{text:\"Add New Project\",scope:this,handler:function(){a.push({xtype:\"newProjectForm\"});this.hide();this.actions.hide()}},{text:\"Add New Task\",scope:this,handler:function(){a.push({xtype:\"newClassTaskForm\"});this.hide();this.actions.hide()}},{xtype:\"button\",text:\"Cancel\",scope:this,handler:function(){this.actions.hide()}}]});this.actions.show()}}else{if(c==\"project\"){return function(){this.actions=Ext.Viewport.add({xtype:\"actionsheet\",items:[{text:\"Add New Member\",scope:this,handler:function(){a.push({xtype:\"newProjectForm\"});this.hide();this.actions.hide()}},{text:\"Add New Job\",scope:this,handler:function(){a.push({xtype:\"newClassTaskForm\"});this.hide();this.actions.hide()}},{xtype:\"button\",text:\"Cancel\",scope:this,handler:function(){this.actions.hide()}}]});this.actions.show()}}}}});Ext.define(\"Igor.view.task.Task\",{extend:\"Ext.NavigationView\",xtype:\"tasksForm\",requires:[\"Ext.List\",\"Ext.Container\",\"Igor.view.task.ClassDetails\",\"Igor.view.task.New\"],config:{autoDestroy:true,navigationBar:{defaults:{hideAnimation:Ext.os.is.Android?false:{type:\"fadeOut\",duration:200},showAnimation:Ext.os.is.Android?false:{type:\"fadeIn\",duration:200}},items:[{xtype:\"button\",itemId:\"termSelectBtn\",iconCls:\"doc_drawer\",iconMask:true,ui:\"plain\",align:\"right\",},{xtype:\"button\",itemId:\"addTaskBtn\",iconCls:\"add\",iconMask:true,ui:\"plain\",align:\"right\",handler:function(){var b=this.up(\"navigationview\");var a=Ext.ComponentQuery.query(\"#termSelectBtn\")[0];b.push({xtype:\"newTask\"});this.hide();a.hide()}}]},items:[{xtype:\"list\",itemId:\"schedulerList\",ui:\"round\",title:\"Schedulers\",itemTpl:\"{title}\",limit:5,store:\"Tasks\",grouped:true,itemTpl:['<div class=\"class\"><div class=\"title\">{subject_name}</div>','<div class=\"session\">{total_session}</div></div>','<span style=\"font-size: 70%\">{location}</span>'].join(\"\"),items:[{docked:\"top\",xtype:\"toolbar\",scrollable:\"horizontal\",items:[{padding:\"0 5\",defaults:{width:\"95px\"},xtype:\"segmentedbutton\",itemId:\"daySelectBtn\",allowDepress:true,items:[{text:\"Monday\",itemId:\"0\",pressed:true},{text:\"Tuesday\",itemId:\"1\",},{text:\"Wednesday\",itemId:\"2\",},{text:\"Thursday\",itemId:\"3\",},{text:\"Friday\",itemId:\"4\",},{text:\"Saturday\",itemId:\"5\",},{text:\"Sunday\",itemId:\"6\",}],}]}],}]}});Ext.define(\"Igor.view.Main\",{extend:\"Ext.tab.Panel\",xtype:\"mainpanel\",requires:[\"Igor.view.notification.News\",\"Igor.view.profile.Profile\",\"Igor.view.task.Task\",\"Igor.view.about.About\"],config:{",126,40,"ui:\"dark\",layout:{animation:\"slide\",type:\"card\"},items:[{title:\"News\",iconCls:\"rss\",cls:\"news\",xtype:\"updatesListForm\"},{xtype:\"tasksForm\",title:\"Scheduler\",iconCls:\"calendar2\",cls:\"task\"},{title:\"Me\",iconCls:\"team\",cls:\"profile\",xtype:\"userDetailsForm\",},{title:\"About\",iconCls:\"info\",cls:\"about\",xtype:\"aboutPage\"",957,35,"\",iconCls:\"chat_black2",1028,309,"}]}]}});Ext.define(\"Igor.controller.Login\",{extend:\"Ext.app.Controller\",views:[\"authenticate.Authenticate\"],requires:[\"Igor.view.Main\",\"Igor.view.authenticate.Register\"],init:function(){},config:{control:{submitButton:{tap:\"doLogin\"},authenForm:{initialize:\"checkSession\"},registerButton:{tap:\"doRegister\"}},routes:{login:\"doLogin\"},refs:{authenForm:\"authenForm\",loginForm:\"authenForm #loginForm\",submitButton:\"authenForm #submitBtn\",registerButton:\"authenForm #registerBtn\"},before:{}},checkSession:function(){var a=Ext.getStore(\"Users\");this.getAuthenForm().onAfter(\"erased\",function(){this.destroy()});a.load({callback:function(c,b,d){if(c!=null&&a.first()!==undefined){Ext.Viewport.setActiveItem(Ext.create(\"Igor.view.Main\"),{type:\"slide\"})}},scope:this})},doLogin:function(){var c=this.getLoginForm().getValues();var b=c.email;var a=c.password;if(b!=\"\"&&a!=\"\"){this.communicatingServer(b,a)}else{Ext.Msg.alert(\"Invalid Email or Password!\")}},communicatingServer:function(b,a){Ext.data.JsonP.request({url:\"https://igor-assistant-ca-2012.appspot.com/igor/user/call/jsonp/login/\",params:{email:b,password:a},disableCaching:false,success:function(c,e){if(c.status==\"OK\"&&c.message!==\"Authentication failed! Check your email or password again\"){var d=Ext.getStore(\"Users\"),f={};d.removeAll();d.sync();Ext.Array.each(c.message,function(g){g.avatar=\"default_male.png\";f=Ext.create(\"Igor.model.User\",g);f.set(\"loggedIn\",true);d.add(f);d.sync()});Ext.Viewport.setActiveItem(Ext.create(\"Igor.view.Main\"))}else{Ext.Msg.alert(\"Invalid Email or Password!\")}}})},doRegister:function(){this.getAuthenForm().push({xtype:\"registerForm\"})}});Ext.define(\"Igor.controller.Register\",{extend:\"Ext.app.Controller\",views:[\"authenticate.Register\"],requires:[\"Igor.view.Main\"],init:function(){},config:{control:{submitRegisterBtn:{tap:\"doRegister\"}},routes:{register:\"doRegister\"},refs:{registerForm:\"registerForm\",submitRegisterBtn:\"registerForm #submitRegisterBtn\"},before:{}},doRegister:function(){var g=this.getRegisterForm().getValues();var b=g.fullname;var h=g.email;var a=g.password;var e=g.studentid;var c=g.course;var d=g.group;var f=\"http://igor-assistant-ca-2012.appspot.com/igor/static/images/igor.jpg\";if(h!=\"\"&&a!=\"\"){this.sendRegisterRequest(h,a,b,d,e,c,f)}else{Ext.Msg.alert(\"Not enough information!\")}},sendRegisterRequest:function(g,c,a,b,e,f,d){Ext.data.JsonP.request({url:\"https://igor-assistant-ca-2012.appspot.com/igor/user/call/jsonp/register/\",params:{email:g,password:c,name:a,class_group:b,student_code:e,user_course:f,avatar:d},disableCaching:false,success:function(h,j){if(h.status==\"OK\"&&h.message!=\"\"){var i=h.message;Ext.data.JsonP.request({url:\"https://igor-assistant-ca-2012.appspot.com/igor/user/call/jsonp/get_user_detail/\",params:{id:i},disableCaching:false,success:function(k,m){if(k.status==\"OK\"&&k.message!=\"\"){var l=Ext.getStore(\"Users\"),n={};l.removeAll();l.sync();Ext.Array.each(k.message,function(o){if(o.avatar==\"\"){o.avatar=\"default_male.png\"}n=Ext.create(\"Igor.model.User\",o);n.set(\"loggedIn\",true);l.add(n);l.sync()});Ext.Viewport.setActiveItem(Ext.create(\"Igor.view.Main\"))}else{Ext.Msg.alert(\"Failed Registering!\")}}})}else{Ext.Msg.alert(\"Failed Registering!\")}}})}});Ext.Loader.setConfig({disableCaching:false});Ext.application({name:\"Igor\",requires:[\"Ext.MessageBox\"],controllers:[\"Main\",\"ClassDetails\",\"Login\",\"Register\"],views:[\"Main\",\"authenticate.Authenticate\",\"authenticate.Register\"],stores:[\"Notifications\",\"Users\",\"Profiles\",\"Tasks\",\"Classdetails\",\"Classprojects\",\"Classtasks\",\"Projectmembers\",\"Projectjobs\",\"Classusers\",\"Subjects\"],models:[\"Notification\",\"User\",\"Task\",\"Classdetail\",\"Classproject\",\"Classtask\",\"Projectjob\",\"Projectmember\",\"Classuser\",\"Profile\",\"Subject\"],icon:{57:\"resources/icons/Icon.png\",72:\"resources/icons/icon@72.png\",114:\"resources/icons/Icon@2x.png\",144:\"resources/icons/icon@114.png\"},phoneStartupScreen:\"resources/loading/Default.jpg\",tabletStartupScreen:\"resources/loading/Default~ipad.jpg\",launch:function(){Ext.fly(\"appLoadingIndicator\").destroy();Ext.Viewport.add({xclass:\"Igor.view.authenticate.Authenticate\"})},onUpdated:function(){Ext.Msg.confirm(\"Application Update\",\"This application has just successfully been updated to the latest version. Reload now?\",function(a){if(a===\"yes\"){window.location.reload()}})}});"]