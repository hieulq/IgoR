["/*3c44570f51e6e8262e7778630a1af694b3eaa173",42,81,"notification_id\",",122,64,",\"is_read",185,68,"idProperty:\"userid\",identifier:{type:\"uuid\"},fields:[{name:\"userid\",type:\"int\"},{name:\"fullname\",type:\"string\"},{name:\"avatar\",type:\"string\"},{name:\"studentid\",type:\"int\"},{name:\"email\",type:\"string\"},{name:\"group\",type:\"string\"},{name:\"course\",type:\"string\"},{name:\"loggedIn\",type:\"boolean\",defaultValue:false}]",350,88,"class_id",639,112,841,32,"detail",880,44,"class_id\",",424,123,",",841,1195,"model.Classuser",880,44,262,87,"}});Ext.define(\"Igor.model.Profile",880,35,"idProperty:\"userid\",identifier:{type:\"uuid\"},fields:[{name:\"userid\",type:\"int\"},{name:\"fullname\",type:\"string\"},{name:\"avatar\",type:\"string\"},{name:\"studentid\",type:\"int\"},{name:\"email\",type:\"string\"},{name:\"group\",type:\"string\"},{name:\"course\",type:\"string",5760,106,16543,122,9307,127,34076,48,"passwordfiel",16827,36,6062,537,"HTTT\",title:\"HTTT\"},{groupid:\"TTM\",title:\"TTM\"},{groupid:\"KHMT\",title:\"KHMT\"},{groupid:\"KTMT\",title:\"KTMT\"},{groupid:\"CNPM",6707,53,"itemId:\"submitRegisterBtn\",ui:\"confirm\",margin:\"5\",}]",2015,1151,3216,59,"requires:[\"Ext.data.proxy.LocalStorage\"]",3274,33,"autoSync:true,proxy:{type:\"localstorage\",id:\"usersStorage\"},autol",4062,36,3472,61,"Profile",3068,99,3680,231,3952,616,"store.Classu",3244,57,"Classu",3534,101,4547,119,"],config:{autoDestroy:tru",17511,178,5631,83,",{xtype:\"button\",itemI",4972,108,"temI",5080,385,",",5465,130,"tru",5599,185,"utility.ux.PathMenu\",{mixins:[\"Ext.mixin.Observable\"],xtype:\"pathmenu\",requires:[\"Ext.Button\",\"Ext.util.DelayedTask\"],config:{cls:\"x-ux-pathmenu\",top:null,bottom:null,right:null,left:null,height:40,width:40,items:[],radius:150,menuButtonDefault:{iconCls:\"add\",ui:\"pathmenu\",iconMask:true,isOpen:false,pathButtonType:\"menu\",cls:\"menubutton\"},menuItemDefault:{iconMask:true,ui:\"pathmenu\",isActive:false,pathButtonType:\"menuitem\"},menuItems:null,menuTrigger:null},constructor:function(c){this.initConfig(c);var d=this,b=[],a={xtype:\"button\",top:this.getTop(),bottom:this.getBottom(),right:this.getRight(),left:this.getLeft(),height:this.getHeight(),width:this.getWidth()},e=this.getMenuButtonDefault(),f=this.getMenuItemDefault();Ext.each(c.items,function(h,g){var i=Ext.apply(h,f,a);Ext.apply(i,{handler:d.onMenuItemButtonTap,scope:d});b.push(h);delete (h)},this);b.push(Ext.apply({handler:d.onMenuButtonTap,scope:d},e,a));Ext.Viewport.add(b)},onMenuItemButtonTap:function(b){var c=this,a=Ext.ComponentQuery.query(\"button[pathButtonType=menu]\")[0];b.addCls(\"tapped\");c.close(a);b.fireEvent(\"itemtap\",c,b)},onMenuButtonTap:function(a){if(!a.isOpen){this.open(a)}else{this.close(a)}},open:function(d){var c=Ext.ComponentQuery.query(\"button[pathButtonType=menuitem]\"),b=d.getBottom(),f=d.getLeft(),a=150,e=c.length-1;angle=90/e;d.replaceCls(\"close\",\"open\");Ext.each(c,function(i,h){i.addCls(\"menuitembutton\");i.replaceCls(\"close\",\"open\");var k=(90-(angle*(e-h))),j=Math.PI/180,l=j*k,g=Math.round(Math.cos(l)*a),m=Math.round(Math.sin(l)*a);i.setLeft(f+g);i.setBottom(b+m)});d.isOpen=true},close:function(b){var a=Ext.ComponentQuery.query(\"button[pathButtonType=menuitem]\");b.replaceCls(\"open\",\"close\");Ext.each(a,function(e,d){if(e.getCls().indexOf(\"tapped\")===-1){e.replaceCls(\"open\",\"close\");e.setLeft(10);e.setBottom(10)}else{var c=Ext.create(\"Ext.util.DelayedTask\",function(){e.removeCls(\"menuitembutton\");e.setLeft(10);e.setBottom(10);e.removeCls(\"tapped\")});c.delay(900)}});b.isOpen=false",17324,34,7882,51,7950,247,8297,2251,"MultiSelect\",{extend:\"Ext.field.Select\",alias:\"widget.multiselectfield\",xtype:\"multiselectfield\",usePicker:false,getTabletPicker:function(){var a=this.getDefaultTabletPickerConfig();if(!(this.listPanel)){this.listPanel=Ext.create(\"Ext.Panel\",Ext.apply({centered:true,modal:true,cls:Ext.baseCSSPrefix+\"select-overlay\",layout:\"fit\",hideOnMaskTap:false,items:{xtype:\"list\",mode:\"MULTI\",store:this.getStore(),itemTpl:'<span class=\"x-list-label\">{'+this.getDisplayField()+\"}</span>\",listeners:{select:this.onListSelect,itemtap:this.onListTap,hide:this.onListHide,scope:this},items:{xtype:\"button\",text:\"Done\",ui:\"action\",height:\"20px\",width:\"50%\",docked:\"bottom\",style:\"margin-top: 10px; margin-bottom: 10px; margin-left: auto; margin-right: auto;\",listeners:{tap:this.onButtonTap,scope:this}}}},a))}return this.listPanel},applyValue:function(c){var a=c,b=new Array(),d=new Array();d=(c==null?\"\":c.split(\",\"));if((c!=null)&&c.trim().localeCompare(\"\")){for(v=0;v<d.length;v++){item=this.getStore().find(this.getValueField(),d[v],null,null,null,true);b.push(this.getOptions()[item].get(this.getDisplayField()))}}this.element.dom.lastChild.firstChild.firstChild.value=b.join(\", \");return a},updateValue:function(b,a){this.previousRecord=a;this.record=b;this.fireEvent(\"change\",this,b,a)},getValue:function(){var a=this.record;return(a)},showPicker:function(){if(this.getStore().getCount()===0){return}if(this.getReadOnly()){return}this.isFocused=true;if(this.getUsePicker()){var d=this.getPhonePicker(),a=this.getName(),h={};h[a]=this.record.get(this.getValueField());d.setValue(h);if(!d.getParent()){Ext.Viewport.add(d)}d.show()}else{var f=this.getTabletPicker(),e=f.down(\"list\"),i=e.getStore(),c=new Array(),k=(this.getValue()==null?\"\":this.getValue().split(\",\")),j=0,g=k.length;if(!f.getParent()){Ext.Viewport.add(f)}for(j=0;j<g;j++){c.push(k[j])}j=0;for(j=0;j<g;j++){var b=i.findRecord(this.getValueField(),c[j],0,true,false,false);e.select(b,true,false)}f.showBy(this.getComponent());f.down(\"list\").show()}},onListSelect:function(b,a){},onListTap:function(){},onButtonTap:function(){this.setValue(\"\");this.listPanel.down(\"list\").hide();this.listPanel.hide({type:\"fade\",out:true,scope:this})},onListHide:function(d,c){var b=this,g=this.listPanel.down(\"list\").selected.items,f=new Array(),a=0,e=g.length;for(a=0;a<e;a++){if(g[a].data[this.getDisplayField()]){f.push(g[a].data[this.getValueField()])}}if(f.length>0){b.setValue(f.join(\",\"));this.listPanel.down(\"list\").deselectAll()}else{b.setValue(null)}",10522,5770,27996,40,16346,64,"authe",16414,86,"itemId:\"loginForm",16498,249,16765,51,16830,66,"temI",16896,38,"},{xtype:\"button\",itemId:\"registerBtn\",text:\"Register with Gmail\",margin:\"5\",",17320,165,",],config:{autoDestroy:tru",17511,187,"temId:\"logoutButton\",iconCls:\"reply",17736,66,"Ext.getStore(\"Users\");a.removeAll();a.sync();",17056,49,"authenticate.Authenticate\"),{type:\"slide\"})}},{xtype:\"button\",itemI",17698,1600,12558,35,19786,35,6967,71,"temId:\"newProjectForm\",requires:[\"Igor.store.Classusers\",\"Igor.view.MultiSelect\"]",7056,43,"classid:null",7984,33,7131,175,"multiselectfield\",usePicker:false,itemId:\"userListF",7313,77,"fullname\",",7500,369,19821,715,"temI",20536,1140,26309,1092,27430,552,27996,369,"true",26603,34,28404,36,"tru",28444,167,28626,36,"-Code: {subject",28656,2547,21676,46,21737,67,31302,37,"utility.ux.PathMenu",21803,117,21964,44,22101,38,"daySelBtn:{toggle:\"onDayToggle",22135,48,",initialize:\"onTaskInit\"},classDetailsForm:{initialize:\"classDetailInit\"},refreshNewsButton:{tap:\"onNotificationInit\"},updatesListForm:{initialize:\"onNewsInit\",},schedulerList:{itemtap:\"onTaskTap\",itemtaphold:\"onTaskTapHold\"},newProjectForm:{initialize:\"onNewProjectInit\"},mainPnl:{initialize:\"onNotificationInit\"},\"button[pathButtonType=menuitem]\":{itemtap:\"onPathMenuItemTap",22182,113,"day_of_week\":\"showTasksByDay\",\"tasks",22334,36,"viewUserDetails",22376,98,"refreshNewsButton:\"updatesListForm #refreshNewsButton\",updatesListForm:\"updatesListForm\",daySelBtn:\"tasksForm #daySelectBtn\",mainPnl:\"mainpanel\",newProjectForm:\"newProjectForm\",classDetails:\"classDetailsForm\",schedulerList:\"tasksForm #schedulerList\",userListField:\"newProjectForm #userListField\",tasksForm:\"tasksForm\",addTaskBtn:\".tasksForm #addTaskBtn",22547,35,"termSelBtn:\".tasksForm #termSelectBtn",22580,36,"editProfileButton:\"userDetailsForm #editProfileButton\",},before:{",22748,47,"},},testFunc:function(){var b=this.getMainPnl().getTabBar().getComponent(0)},onPathMenuItemTap:function(b,a){console.log(b,a)},onNewsInit:function(){Ext.create(\"Igor.utility.ux.PathMenu\",{bottom:10,left:10,items:[{iconCls:\"action\",cardIndex:0},{iconCls:\"add\",cardIndex:1},{iconCls:\"compose\",cardIndex:2},{iconCls:\"home\",cardIndex:3},{iconCls:\"refresh\",cardIndex:4}]})},classDetailInit:function(){},onTaskTap:function(d,c,e,a){var b=Ext.ComponentQuery.query(\"#termSelectBtn\")[0];window.location.href=\"index.html#tasks/\"+a.get(\"class_id\");b.hide()},onTaskTapHold:function(d,b,e,a){var c=Ext.getStore(\"Users\").getAt(0).get(\"userid\");Ext.Msg.confirm(\"Delete\",\"Are you sure you want to delete this scheduler ?\",function(f){if(f===\"yes\"){this.getMainPnl()",8911,38,"Loading...\"});Ext.data.JsonP.request({url:\"https://igor-assistant-ca-2012.appspot.com/igor/class_subject/call/jsonp/delete_class\",params:{user_id:c,class_id:a.get(\"class_id\")},disableCaching:false,success:function(g,h){mainPanel=Ext.ComponentQuery.query(\"mainpanel\")[0];mainPanel.unmask();if(g.status=\"OK\"){}}});console.log(a)}})},onTaskInit:function(){var b=this.getDaySelBtn(",33169,59,";this.showTasksByDay",33225,33,";this.showTasksByDay(a-1)}this.getTermSelBtn().setHandler(",31652,294,")},onNotificationInit:function(){this.getMainPnl()",8911,38,"Loading...\"});this.getMainPnl().getTabBar().getComponent(0).setBadgeText(null);var a=Ext.getStore(\"Users\").getAt(0).get(\"userid\");Ext.data.JsonP.request({url:\"https://igor-assistant-ca-2012.appspot.com/igor/notification/call/jsonp/get_all_notification\",params:{owner:a,},disableCaching:false,success:function(c,e){mainPanel=Ext.ComponentQuery.query(\"mainpanel\")[0];mainPanel.unmask();if(c.status=\"OK\"){var f=Ext.getStore(\"Notifications\"),b={},d=0;f.removeAll();Ext.Array.each(c.message,function(g){if(g.is_read==false){d++}if(g.avatar==null){g.avatar=\"default_male.png\"}b=Ext.create(\"Igor.model.Notification\",g);f.add(b);if(d!=0){mainPanel.getTabBar().getComponent(0).setBadgeText(d)}})}}})},onNewProjectInit:function(){var b=this.getNewProjectForm().getClassid();var a=Ext.getStore(\"Classdetails\").getAt(0).get(\"class_id\");Ext.data.JsonP.request({url:\"https://igor-assistant-ca-2012.appspot.com/igor/user/call/jsonp/get_users_by_class\",params:{class_id:a,},disableCaching:false,success:function(c,d){mainPanel=Ext.ComponentQuery.query(\"mainpanel\")[0];mainPanel.unmask();if(c.status=\"OK\"){var e=Ext.getStore(\"Classusers\"),f={};e.removeAll();Ext.Array.each(c.message,function(g){f=Ext.create(\"Igor.model.Classuser\",g);e.add(f)});Ext.ComponentQuery.query(\"#userListField\")[0].setOptions(e.getData().all)}}})},onDayToggle:function(a,c,d,b){window.location.href=\"index.html#tasks/taskbyday/\"+c.getItemId()",22868,32,"this.getEditProfileButton(",22930,37,"c=this.getTasksForm();var b=c.getPreviousItem();var a=this.getAddTaskBtn();if(b==null){a.setHandler(function(){var e=this.up(\"navigationview\");var d=Ext.ComponentQuery.query(\"#termSelectBtn\")[0];e",23183,37,"d.hide()});this.getTermSelBtn()",23232,65,"a.show();a.setHandler(this.getFuncForAddBtn(\"class\")",23247,33,"classDetailsForm\")!=-1){a.show();a.setHandler(this.getFuncForAddBtn(\"project\")",24288,32,"a=this.getTasksForm();var b=a.getActiveItem();",23772,50,"this.getAddTaskBtn().setHandler(this.getFuncForAddBtn(\"class\")",23247,33,"projectDetailsForm\")!=-1){this.getAddTaskBtn().setHandler(this.getFuncForAddBtn(\"project\")",23247,33,"classTaskDetailsForm\")!=-1){this.getAddTaskBtn().hide",23246,34,"jobDetailsForm\")!=-1){this.getAddTaskBtn().hide()}}}}",25719,291,"this.getMainPnl()",8911,38,"Loading...\"});var b=Ext.getStore(\"Users\").getAt(0).get(\"userid\");Ext.data.JsonP.request({url:\"https://igor-assistant-ca-2012.appspot.com/igor/class_subject/call/jsonp/get_classes_by_user_time\",params:{user_id:b,term:\"20111\",day_of_week:a},disableCaching:false,success:function(c,f){Ext.ComponentQuery.query(\"mainpanel\")[0].unmask();if(c.status=\"OK\"){var d=Ext.getStore(\"Tasks\"),e={};d.removeAll();Ext.Array.each(c.message,function(g){e=Ext.create(\"Igor.model.Task\",g);d.add(e)})}}})",26010,35,"getMainPnl()",8911,38,"Loading...\"});Ext.data.JsonP.request({url:\"https://igor-assistant-ca-2012.appspot.com/igor/class_subject/call/jsonp/get_class_detail\",params:{id:a},disableCaching:false,success:function(b,e){Ext.ComponentQuery.query(\"mainpanel\")[0].unmask();if(b.status=\"OK\"){var c=Ext.getStore(\"Classdetails\"),d={};c.removeAll();Ext.Array.each(b.message,function(f){d=Ext.create(\"Igor.model.Classdetail\",f);c.add(d)});Ext.ComponentQuery.query(\"tasksForm\")[0]",33048,33,"}}})},viewUserDetails:function(a){this.getMainPnl()",8911,38,"Loading...\"});Ext.data.JsonP.request({url:\"https://igor-assistant-ca-2012.appspot.com/igor/user/call/jsonp/get_user_detail\",params:{id:a},disableCaching:false,success:function(b,e){Ext.ComponentQuery.query(\"mainpanel\")[0].unmask();if(b.status=\"OK\"){var c=Ext.getStore(\"Profiles\"),d={};c.removeAll();Ext.Array.each(b.message,function(f){d=Ext.create(\"Igor.model.Profile\",f);c.add(d)})}}})",26082,34,26150,36,26240,49,"getFuncForAddBtn:function(c){var a=this.getTasksForm();var b=a.getActiveItem();if(c==\"class\"){return ",24460,123,"a",23998,81,"Task",7568,32,"a",24702,173,"}else{if(c==\"project\"){return ",24460,84,"Member",7568,32,"a",23998,116,"a",24702,173,"}}",31182,193,"tru",17511,187,"temI",31566,78,"},{xtype:\"button\",itemI",31965,129,"ComponentQuery.query(\"#termSelectBtn\")[0];b",23183,37,32156,451,"itemId:\"daySelectBt",32604,43,"itemId:\"0\",pressed:true},{text:\"Tuesday\",itemId:\"1\",},{text:\"Wednesday\",itemId:\"2\",},{text:\"Thursday\",itemId:\"3\",},{text:\"Friday\",itemId:\"4\",},{text:\"Saturday\",itemId:\"5\",},{text:\"Sunday\",itemId:\"6\",}],}]}],}]",33259,332,"xtype:\"updatesListForm\"},{xtype:\"tasksForm",33671,117,33797,439,"define(\"Igor.controller.Log",21689,41,"authenticate.Authenticate\"],requires:[\"Igor.view.Main",21803,38,"submitButton:{tap:\"doLogin\"},authenForm:{initialize:\"checkSession\"},registerButton:{tap:\"doRegister\"}},routes:{login:\"doLogin\"},refs:{authenForm:\"authenForm\",loginForm:\"authenForm #loginForm\",submitButton:\"authenForm #submitBtn\",registerButton:\"authenForm #registerBtn\"},before:{}},checkSession:function(){var a=Ext.getStore(\"Users\");this.getAuthenForm().onAfter(\"erased\",function(){this.destroy()}",27947,35,"if(c!=null&&a.first()!==undefined",17054,57,",{type:\"slide\"})}},scope:this})},doLogin:function(){var c=this.getLoginForm().getValues();var b=c.email;var a=c.password;if(b!=\"\"&&a!=\"\"){this.communicatingServer(b,a)}else{Ext.Msg.alert(\"Invalid Email or Password!\")}},communicatingServer:function(b,a){Ext.data.JsonP.request({url:\"https://igor-assistant-ca-2012.appspot.com/igor/user/call/jsonp/login/\",params:{email:b,password:a},disableCaching:false,success:function(c,e){if(c.status==\"OK\"&&c.message!==\"Authentication failed! Check your email or password again\"){var d=Ext.getStore(\"Users\"),f={};d.removeAll();d.sync();Ext.Array.each(c.message,function(g){g.avatar=\"default_male.png\";f=Ext.create(\"Igor.model.User\",g);f.set(\"loggedIn\",true);d.add(f);d.sync()});",17056,77,"Invalid Email or Password!\")}}})},doRegister:function(",17054,51,"authenticate.Register\"))",2015,32,"Register",2059,39,"authenticate.Register\"],requires:[\"Igor.view.Main",21803,38,"submitRegisterBtn:{tap:\"doRegister\"}},routes:{register:\"doRegister\"},refs:{registerForm:\"registerForm\",submitRegisterBtn:\"registerForm #submitRegisterBtn\"},before:{}},doRegister:function(){var g=this.getRegisterForm().getValues();var b=g.fullname;var h=g.email;var a=g.password;var e=g.studentid;var c=g.course;var d=g.group;var f=\"http://igor-assistant-ca-2012.appspot.com/igor/static/images/igor.jpg\";if(h!=\"\"&&a!=\"\"){this.sendRegisterRequest(h,a,b,d,e,c,f)}else{Ext.Msg.alert(\"Not enough information!\")}},sendRegisterRequest:function(g,c,a,b,e,f,d){Ext.data.JsonP.request({url:\"https://igor-assistant-ca-2012.appspot.com/igor/user/call/jsonp/register/\",params:{email:g,password:c,name:a,class_group:b,student_code:e,user_course:f,avatar:d},disableCaching:false,success:function(h,j){if(h.status==\"OK\"&&h.message!=\"\"){var i=h.message;Ext.data.JsonP.request({url:\"https://igor-assistant-ca-2012.appspot.com/igor/user/call/jsonp/get_user_detail/\",params:{id:i},disableCaching:false,success:function(k,m){if(k.status==\"OK\"&&k.message!=\"\"){var l=Ext.getStore(\"Users\"),n={};l.removeAll();l.sync();Ext.Array.each(k.message,function(o){if(o.avatar==\"\"){o.avatar=\"default_male.png\"}n=Ext.create(\"Igor.model.User\",o);n.set(\"loggedIn\",true);l.add(n);l.sync()});",17056,77,"Failed Registering!\")}}})}else{Ext.Msg.alert(\"Failed Registering!\")}}})",34228,140,",\"Login\",\"Register",34367,44,",\"authenticate.Register",34410,128,",\"Classuser",34536,110,",\"Classuser\",\"Profile",34645,351,"authenticate.Authenticate",35000,209]