/*4f0999b96ae82e39711a7360a1230c4e050dd55b*/Ext.define("Igor.model.Notification",{extend:"Ext.data.Model",config:{fields:["userid","username","avatar","action","object","objectid","date"]}});Ext.define("Igor.model.User",{extend:"Ext.data.Model",config:{fields:["userid","username","fullname","password","avatar","studentid","email","group","course"]}});Ext.define("Igor.model.Task",{extend:"Ext.data.Model",config:{fields:["class_code","subject_name","num_of_day","period","subject_code","session_start","total_session","teacher_name","location"]}});Ext.define("Igor.store.Notifications",{extend:"Ext.data.Store",config:{model:"Igor.model.Notification",pageSize:5,autoLoad:true,sorters:"date",grouper:{groupFn:function(a){return a.get("!username")}},proxy:{type:"ajax",url:"data/notifications.json"}}});Ext.define("Igor.store.Users",{extend:"Ext.data.Store",config:{model:"Igor.model.User",pageSize:5,autoLoad:true,sorters:"date",grouper:{groupFn:function(a){return a.get("!username")}},proxy:{type:"ajax",url:"data/users.json"}}});Ext.define("Igor.store.Profiles",{extend:"Ext.data.Store",config:{model:"Igor.model.User",pageSize:5,autoLoad:true,sorters:"date",grouper:{groupFn:function(a){return a.get("!username")}},proxy:{type:"ajax",url:"data/profiles.json"}}});Ext.define("Igor.store.Tasks",{extend:"Ext.data.Store",config:{model:"Igor.model.Task",pageSize:5,autoLoad:true,sorters:"period",groupField:"period",groupDir:"DESC",grouper:{groupFn:function(a){return a.get("!period")}},proxy:{type:"ajax",url:"data/tasks.json"}}});Ext.define("Igor.view.notification.News",{extend:"Ext.navigation.View",xtype:"news",requires:["Ext.List",],config:{autoDestroy:false,navigationBar:{items:[{xtype:"image",docked:"top",ui:"light",width:100,height:45,src:"resources/images/Igor.png"},{xtype:"button",id:"refreshNewsButton",iconCls:"time_repeat",iconMask:true,ui:"plain",align:"right",hideAnimation:Ext.os.is.Android?false:{type:"fadeOut",duration:200},showAnimation:Ext.os.is.Android?false:{type:"fadeIn",duration:200}}]},items:[{xtype:"list",title:"News",cls:"x-feeds",disclosure:true,limit:5,disableSelection:true,plugins:[{xclass:"Ext.plugin.ListPaging"},{xclass:"Ext.plugin.PullRefresh"}],store:"Notifications",itemTpl:['<div class="feed" style="background-image:url(resources/images/headshots/{avatar});"></div>',"{username}",'<span>{action} <a href="">{object}</a></span>',].join(""),onItemDisclosure:function(a,c,b,d){d.stopEvent();Ext.Msg.alert("Test","Redirect to objectid "+a.get("objectid"))},listeners:{itemtap:function(c,b,d,a){var e=c.getStore().getAt(b);Ext.Msg.alert("Test","Redirect to objectid "+e.get("objectid"))}}}]}});Ext.define("Igor.view.profile.Profile",{extend:"Ext.navigation.View",xtype:"profile",requires:["Ext.List","Igor.store.Users"],config:{autoDestroy:false,navigationBar:{items:[{xtype:"image",docked:"top",ui:"light",width:100,height:45,src:"resources/images/Igor.png"},{xtype:"button",id:"editProfileButton",iconCls:"compose",iconMask:true,ui:"plain",align:"right",hideAnimation:Ext.os.is.Android?false:{type:"fadeOut",duration:200},showAnimation:Ext.os.is.Android?false:{type:"fadeIn",duration:200}}]},items:[{xtype:"container",layout:"vbox",cls:"userInfo",title:"Profile",items:[{xtype:"dataview",flex:1,scrollable:true,store:"Users",itemTpl:['<div class="header">','   <div class="avatar" style="background-image:url(resources/images/headshots/{avatar});"></div>',"   <h3>{fullname}</h3>","   <h4>{group} - Course {course}</h4>","</div>",'<div class="x-container x-form-fieldset nonEditable" style="padding: 1em;">','<div class="x-docking-vertical">','<div class="x-body">','<div class="x-inner x-form-fieldset-inner">','<div class="x-container x-field-text x-field x-label-align-left x-field-labeled x-form-label-nowrap x-empty">','<div class="x-form-label" style="width: 30% !important;">',"<span>Student ID</span>","</div>",'<div class="x-component-outer">','<div class="x-field-input">','<input class="x-input-el x-form-field x-input-text" type="text" value="{studentid}">','<div class="x-field-mask" style="display: none !important; "></div>',"</div>","</div>","</div>",'<div class="x-container x-field x-field-text x-label-align-left x-field-labeled x-form-label-nowrap x-empty">','<div class="x-form-label" style="width: 30% !important; ">',"<span>Email</span>","</div>",'<div class="x-component-outer">','<div class="x-field-input">','<input class="x-input-el x-form-field x-input-email" type="email" value="{email}">','<div class="x-field-mask" style="display: none !important; "></div>',"</div>","</div>","</div>",'<div class="x-container x-field-text x-field x-label-align-left x-field-labeled x-form-label-nowrap x-empty">','<div class="x-form-label" style="width: 30% !important; ">',"<span>Username</span>","</div>",'<div class="x-component-outer">','<divclass="x-field-input">','<input class="x-input-el x-form-field x-input-email" type="text" value="{username}">','<div class="x-field-mask" style="display: none !important; "></div>',"</div>","</div>","</div>","</div>","</div>","</div>","</div>"].join("")}]}]}});Ext.define("Igor.view.task.Task",{extend:"Ext.NavigationView",xtype:"tasks",requires:["Ext.List","Ext.Container"],config:{autoDestroy:false,navigationBar:{items:[{xtype:"image",docked:"top",ui:"light",width:100,height:45,src:"resources/images/Igor.png"},{xtype:"button",id:"termSelectBtn",iconCls:"doc_drawer",iconMask:true,ui:"plain",align:"right",hideAnimation:Ext.os.is.Android?false:{type:"fadeOut",duration:200},showAnimation:Ext.os.is.Android?false:{type:"fadeIn",duration:200},handler:function(){if(!this.picker){this.picker=Ext.Viewport.add({xtype:"picker",title:"Select Term",toolbar:{title:"Select Term"},slots:[{name:"term",title:"Term",data:[{text:"20111",value:20111},{text:"20112",value:20112},{text:"20113",value:20113},{text:"20121",value:20121}]}]})}this.picker.show()}},{xtype:"button",id:"addTaskBtn",iconCls:"add",iconMask:true,ui:"plain",align:"right",hideAnimation:Ext.os.is.Android?false:{type:"fadeOut",duration:200},showAnimation:Ext.os.is.Android?false:{type:"fadeIn",duration:200}}]},items:[{xtype:"list",ui:"round",title:"Tasks",itemTpl:"{title}",limit:5,store:"Tasks",grouped:true,itemTpl:['<div class="class"><div class="title">{subject_name}</div>','<div class="session">{total_session}</div></div>','<span style="font-size: 70%">{location}</span>'].join(""),items:[{docked:"top",xtype:"toolbar",scrollable:"horizontal",items:[{padding:"0 5",defaults:{width:"95px"},xtype:"segmentedbutton",allowDepress:true,items:[{text:"Monday",pressed:true},{text:"Tuesday"},{text:"Wednesday"},{text:"Thursday"},{text:"Friday"},{text:"Saturday"},{text:"Sunday"}],listeners:{toggle:function(a,b,c){Ext.Msg.alert("Test","User toggled the '"+b._text+"' button: "+(c?"on":"off"))}}}]}]}]},initialize:function(){this.callParent();var b=this.down("segmentedbutton");var a=new Date().getDay();if(a==0){b.setPressedButtons(6)}else{b.setPressedButtons(a-1)}}});Ext.define("Igor.view.about.About",{extend:"Ext.navigation.View",xtype:"aboutPage",requires:["Ext.List"],config:{autoDestroy:false,navigationBar:{items:[{xtype:"image",docked:"top",ui:"light",width:100,height:45,src:"resources/images/Igor.png"}]},items:[{xtype:"container",title:"About Igor"}]}});Ext.define("Igor.view.authenticate.Register",{extend:"Ext.form.Panel",xtype:"registerpage",config:{title:"Register",iconCls:"team",layout:"vbox",items:[{xtype:"fieldset",title:"Register",instructions:"Email and Password are required.",items:[{xtype:"textfield",label:"Full Name",name:"fullname"},{xtype:"textfield",label:"Student ID",name:"studentid"},{xtype:"datepickerfield",name:"dob",label:"DOB",value:new Date("3/19/1989"),picker:{yearFrom:1989}},{xtype:"selectfield",label:"Course",name:"course",valueField:"course",displayField:"title",store:{data:[{course:"52",title:"Course 52"},{course:"53",title:"Course 53"},{course:"54",title:"Course 54"},{course:"55",title:"Course 55"},{course:"56",title:"Course 56"}]}},{xtype:"selectfield",label:"Group",name:"group",valueField:"groupid",displayField:"title",store:{data:[{groupid:"1",title:"HTTT"},{groupid:"2",title:"TTM"},{groupid:"3",title:"KHMT"},{groupid:"4",title:"KTMT"},{groupid:"5",title:"CNPM"}]}}]},{xtype:"button",text:"Register",ui:"confirm",margin:"5",handler:function(){var a=this.up("formpanel");a.submit({success:function(){Ext.Msg.alert("Thank You","Your message has been received",function(){a.reset()})}})}}]}});Ext.define("Igor.view.Main",{extend:"Ext.tab.Panel",xtype:"mainpanel",requires:["Igor.view.notification.News","Igor.view.profile.Profile","Igor.view.task.Task","Igor.view.about.About"],config:{fullscreen:true,tabBarPosition:"bottom",ui:"dark",layout:{animation:"slide",type:"card"},items:[{title:"News",iconCls:"rss",cls:"news",badgeText:"3",xtype:"news"},{xtype:"tasks",title:"Task",iconCls:"calendar2",cls:"task"},{title:"Me",iconCls:"team",cls:"profile",xtype:"profile"},{title:"About",iconCls:"info",cls:"about",xtype:"aboutPage"},{xtype:"formpanel",title:"Contact",iconCls:"chat_black2",layout:"vbox",items:[{xtype:"fieldset",title:"Contact Us",instructions:"Email address is optional",items:[{xtype:"textfield",label:"Name",name:"name"},{xtype:"emailfield",label:"Email",name:"email"},{xtype:"textareafield",label:"Message",name:"message",height:90}]},{xtype:"button",text:"Send",ui:"confirm",}]}]}});Ext.define("Igor.view.authenticate.Authenticate",{extend:"Ext.navigation.View",xtype:"authenform",requires:["Igor.view.authenticate.Register"],config:{items:[{xtype:"formpanel",title:"Login",iconCls:"team",layout:"vbox",items:[{xtype:"image",cls:"logo",ui:"light",width:100,height:45,src:"resources/images/Igor.png"},{xtype:"fieldset",title:"Login",instructions:"Email and Password are required.",items:[{xtype:"emailfield",label:"Email",name:"email"},{xtype:"passwordfield",label:"Password",name:"password"}]},{xtype:"button",text:"Login",ui:"confirm",margin:"5",handler:function(){var b=this.up("formpanel");var a=b.getValues();if(a.email=="hieulq89@gmail.com"&&a.password=="123456"){Ext.Viewport.setActiveItem(Ext.create("Igor.view.Main"))}else{Ext.Msg.alert("Sorry","Incorrect email/password!")}}},{xtype:"button",text:"Register with Gmail",ui:"action",margin:"5",handler:function(){var a=this.up("navigationview");a.push({xtype:"registerpage"})}}]}]}});Ext.Loader.setConfig({disableCaching:false});Ext.application({name:"Igor",requires:["Ext.MessageBox"],controllers:[],views:["Main","authenticate.Authenticate"],stores:["Notifications","Users","Profiles","Tasks"],models:["Notification","User","Task"],icon:{57:"resources/icons/icon.png",72:"resources/icons/icon@72.png",114:"resources/icons/icon@2x.png",144:"resources/icons/icon@114.png"},phoneStartupScreen:"resources/loading/Homescreen.jpg",tabletStartupScreen:"resources/loading/Homescreen~ipad.jpg",launch:function(){Ext.fly("appLoadingIndicator").destroy();Ext.Viewport.add({xclass:"Igor.view.Main"})},onUpdated:function(){Ext.Msg.confirm("Application Update","This application has just successfully been updated to the latest version. Reload now?",function(a){if(a==="yes"){window.location.reload()}})}});